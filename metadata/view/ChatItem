{
    "type": "Ext.dataview.component.ListItem",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "baseCls": "x-chat-item",
        "charMessage": null,
        "container|align": "start",
        "container|pack": "end",
        "designer|userAlias": "chatItem",
        "designer|userClassName": "ChatItem",
        "height": null,
        "itemCls": "x-list-item",
        "layout": "hbox",
        "maxWidth": null,
        "padding": "5 0 5 10"
    },
    "configAlternates": {
        "style": "object"
    },
    "designerId": "ad7635b5-6d6d-4aff-b934-19333842fe4f",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "charMessage",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "record"
                ],
                "fn": "updateRecord",
                "implHandler": [
                    "if (record)\r",
                    "{\r",
                    "    if(record.get('id')!=0)\r",
                    "    {\r",
                    "        if(record.get('read_state')==0&&record.get('out')==0)\r",
                    "        {\r",
                    "            VKM.app.globals.messageIds.push({\r",
                    "                id:record.get('id'),\r",
                    "                user_id:record.get('user_id'),\r",
                    "                chat_id:record.get('chat_id')\r",
                    "            })\r",
                    "        }\r",
                    "\r",
                    "        var body=this.down('#body');\r",
                    "        this.down('#body').removeAll(true,true);\r",
                    "        if (record.get('chat_id')&&(record.get('out')!='1'))\r",
                    "        {\r",
                    "            this.down('#avatarContainer').setHidden(false);\r",
                    "            this.down('#avatar0').setHidden(false);\r",
                    "            var member=Ext.getStore('Users').getById(record.get('from_id'));\r",
                    "            if(member)\r",
                    "            {\r",
                    "                this.down('#avatar0').setSrc(member.get('photo_50'));\r",
                    "            }\r",
                    "\r",
                    "        }\r",
                    "        else\r",
                    "        {\r",
                    "            this.down('#avatarContainer').setHidden(true);\r",
                    "            this.down('#avatar0').setHidden(true);\r",
                    "        }\r",
                    "        var date=new Date(parseInt(record.get('date'))*1000);\r",
                    "        var currentDate=new Date(Ext.DateExtras.now());\r",
                    "\r",
                    "        var messageBody=record.get('body');\r",
                    "\r",
                    "        var messageTime=moment(parseInt(record.get('date'))*1000).format('hh:mm');\r",
                    "        var store=Ext.getStore('Chat')\r",
                    "\r",
                    "\r",
                    "\r",
                    "        messageBody= messageBody.replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gi,\"<a href='$1' target='_blank' style='color:white!important'>$1</a>\");\r",
                    "        if(record.get('emoji'))\r",
                    "        {\r",
                    "            messageBody=VKM.app.smiles(messageBody);\r",
                    "            messageBody='<div>'+messageBody+'</div>';\r",
                    "\r",
                    "        }\r",
                    "        messageBody=messageBody.replace(/\\r\\n|\\r|\\n/g,\"<br />\");\r",
                    "\r",
                    "\r",
                    "        //console.log(record.getData());\r",
                    "        if (record.get('out')==1)\r",
                    "        {\r",
                    "            this.down('#left').setHidden(true);\r",
                    "            this.down('#right').setHidden(false);\r",
                    "\r",
                    "            this.down('#timeright').setHidden(true);\r",
                    "            this.down('#timeleft').setHidden(false);\r",
                    "            this.down('#timeleft').setHtml(messageTime);\r",
                    "\r",
                    "\r",
                    "            //this.down('#datetime').setHtml(moment(messageDate).fromNow());\r",
                    "            body.removeCls('triangle-right left');\r",
                    "            body.addCls('triangle-right right');\r",
                    "            body.add({\r",
                    "                xtype: 'component',\r",
                    "                docked:'top',\r",
                    "                cls: 'x-item-message',\r",
                    "                html:messageBody\r",
                    "            })\r",
                    "        }\r",
                    "        else\r",
                    "        {\r",
                    "            this.down('#right').setHidden(true);\r",
                    "            this.down('#left').setHidden(false);\r",
                    "            this.down('#timeleft').setHidden(true);\r",
                    "            this.down('#timeright').setHidden(false);\r",
                    "            this.down('#timeright').setHtml(messageTime);\r",
                    "\r",
                    "            body.removeCls('triangle-right right');\r",
                    "            body.addCls('triangle-right left');\r",
                    "            body.add({\r",
                    "                xtype: 'component',\r",
                    "                docked:'top',\r",
                    "                cls: 'x-item-message',\r",
                    "                html:messageBody\r",
                    "            })\r",
                    "        }    ;\r",
                    "\r",
                    "        var params=\r",
                    "            {\r",
                    "                message:record.getData(),\r",
                    "                body:body,\r",
                    "                component:this\r",
                    "            };\r",
                    "        this.renderMessage(params);\r",
                    "\r",
                    "    }\r",
                    "    else\r",
                    "    {\r",
                    "        this.setHidden(record.get('user_id'));\r",
                    "        this.removeAll(true,true);\r",
                    "        this.setHtml('<div style=\"text-align:center\">'+ux.locale.Manager.get('labels.loadmore')+'</div>');\r",
                    "    }\r",
                    "}"
                ]
            },
            "designerId": "33cae7a6-26a8-4d5f-ba9c-692d8223eacc"
        },
        {
            "type": "Ext.Component",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "cls": [
                    "checkMarkIcon"
                ],
                "height": "100%",
                "width": "50px"
            },
            "designerId": "807eb142-31df-4153-97f3-f8b8c2ffae23"
        },
        {
            "type": "Ext.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "cls": [
                    "multiChat"
                ],
                "container|align": "start",
                "height": "100%",
                "hidden": true,
                "itemId": "avatarContainer",
                "layout": "hbox",
                "margin": null,
                "style": [
                    "{'margin-left':\"-10px\",'margin-right':\"5px\",}"
                ]
            },
            "configAlternates": {
                "style": "object"
            },
            "designerId": "04784c33-fde4-40dc-8586-b60934dae870",
            "cn": [
                {
                    "type": "Ext.Img",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "docked": null,
                        "itemId": "avatar0",
                        "margin": 2,
                        "style": [
                            "style=\"border-radius: 50% 50% 50% 50%\""
                        ],
                        "width": 30
                    },
                    "configAlternates": {
                        "style": "object"
                    },
                    "designerId": "bd2bb306-1b8a-4ac2-9468-bd50eb6a08c0"
                }
            ]
        },
        {
            "type": "Ext.Spacer",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "hidden": true,
                "itemId": "right"
            },
            "designerId": "0190496e-21ff-45e8-8447-27e28c923671"
        },
        {
            "type": "Ext.Component",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "cls": [
                    "x-list-time"
                ],
                "docked": null,
                "hidden": true,
                "html": null,
                "itemId": "timeleft"
            },
            "designerId": "e71bf9dd-3921-442b-811a-1b8e2b3180c3"
        },
        {
            "type": "Ext.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "hidden": null,
                "itemId": "body",
                "layout": "hbox",
                "margin": null,
                "maxWidth": 275
            },
            "designerId": "7cba5cc2-97cb-4cf4-8030-5761cea16bc9"
        },
        {
            "type": "Ext.Component",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "cls": [
                    "x-list-time"
                ],
                "docked": null,
                "hidden": true,
                "html": null,
                "itemId": "timeright"
            },
            "designerId": "14f32ab3-86d6-4b53-8917-57d611de1027"
        },
        {
            "type": "Ext.Spacer",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "hidden": true,
                "itemId": "left"
            },
            "designerId": "b670400b-c6eb-498f-9b9f-7618c7abcba1"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "params"
                ],
                "fn": "renderMessage",
                "implHandler": [
                    "\r",
                    "var record=params.message;\r",
                    "var body=params.body;\r",
                    "var component=params.component;\r",
                    "if(record.geo)\r",
                    "{\r",
                    "    var latitude=record.geo.coordinates.split(' ')[0];\r",
                    "    var longitude=record.geo.coordinates.split(' ')[1];\r",
                    "\r",
                    "    var position = latitude+','+longitude;\r",
                    "//     //new google.maps.LatLng(latitude,longitude)\r",
                    "\r",
                    "//     var image = new google.maps.MarkerImage(\r",
                    "//         'resources/images/point.png',\r",
                    "//         new google.maps.Size(32, 31),\r",
                    "//         new google.maps.Point(0, 0),\r",
                    "//         new google.maps.Point(16, 31)\r",
                    "//     )\r",
                    "\r",
                    "//     var shadow = new google.maps.MarkerImage(\r",
                    "//         'resources/images/shadow.png',\r",
                    "//         new google.maps.Size(64, 52),\r",
                    "//         new google.maps.Point(0, 0),\r",
                    "//         new google.maps.Point(-5, 42)\r",
                    "//     )\r",
                    "\r",
                    "    var url='http://maps.googleapis.com/maps/api/staticmap?center='+position+\r",
                    "        '&zoom=15&size=260x200&maptype=roadmap&markers=color:blue%7C'+position+'&sensor=true'\r",
                    "\r",
                    "    var title=record.geo.title;\r",
                    "    if(record.geo.place)\r",
                    "    {\r",
                    "        title=record.geo.place.title\r",
                    "    }\r",
                    "    body.add({\r",
                    "        xtype: 'component',\r",
                    "        docked: 'top',\r",
                    "        html:'<img width=100% src='+url+'>'+title+'</img>',\r",
                    "        width: 260\r",
                    "        //margin: 2\r",
                    "    });\r",
                    "\r",
                    "\r",
                    "//     body.add({\r",
                    "//         xtype: 'map',\r",
                    "//         position:position,\r",
                    "//         //title:record.geo.place.title,\r",
                    "//         docked: 'top',\r",
                    "//         height: 200,\r",
                    "//         width: 260,\r",
                    "//         margin: 2,\r",
                    "//         mapOptions:{\r",
                    "//             zoom: 15,\r",
                    "//             center : position,\r",
                    "//             zoomControl: true,\r",
                    "//             scaleControl: true,\r",
                    "//         },\r",
                    "//         listeners: {\r",
                    "//             maprender: function(comp, map) {\r",
                    "\r",
                    "//                 var marker = new google.maps.Marker({\r",
                    "//                     position: comp.config.position,\r",
                    "//                     title : comp.config.title,\r",
                    "//                     map: map\r",
                    "//                 });\r",
                    "//                 var infowindow = new google.maps.InfoWindow({\r",
                    "//                     content: '<div id=\"content\">'+comp.config.title+'<div id=\"content\">'\r",
                    "//                 });\r",
                    "\r",
                    "//                 google.maps.event.addListener(marker, 'click', function() {\r",
                    "//                     infowindow.open(map, marker);\r",
                    "//                 });\r",
                    "//             }\r",
                    "\r",
                    "//         }\r",
                    "//     });\r",
                    "\r",
                    "}\r",
                    "\r",
                    "if(record.attachments)\r",
                    "{\r",
                    "    var attachments=record.attachments\r",
                    "    for (var i=0;i<attachments.length;i++)\r",
                    "    {\r",
                    "        if (attachments[i].type=='photo')\r",
                    "        {\r",
                    "            var description=attachments[i].photo.text;\r",
                    "            description=description.replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gi,\"<a href='$1' target='_blank' style='color:white!important'>$1</a>\");\r",
                    "            description=description.replace(/\\r\\n|\\r|\\n/g,\"<br />\");\r",
                    "\r",
                    "            body.add({\r",
                    "                xtype: 'component',\r",
                    "                docked: 'top',\r",
                    "                html:'<img width=100% src='+attachments[i].photo.photo_604+'></img>',\r",
                    "                width: 260\r",
                    "                //margin: 2\r",
                    "            });\r",
                    "            //                 this.down('#body').add({\r",
                    "            //                     xtype: 'component',\r",
                    "            //                     docked: 'top',\r",
                    "            //                     html:description,\r",
                    "            //                     style:{\"font-size\":\"0.8em\",\"font-weight\": \"light\"},\r",
                    "            //                     margin: 2\r",
                    "            //                 });\r",
                    "            //            console.log(record.getData());\r",
                    "        }\r",
                    "        if (attachments[i].type=='doc')\r",
                    "\r",
                    "        {\r",
                    "            var icoName='resources/images/ext/32/'+attachments[i].doc.ext.toUpperCase()+'.png';\r",
                    "            if (!VKM.app.globals.docIcons[attachments[i].doc.ext.toUpperCase()])\r",
                    "            {\r",
                    "                icoName='resources/images/ext/32/Default.png';\r",
                    "            }\r",
                    "\r",
                    "            body.add({\r",
                    "                xtype: 'container',\r",
                    "                docked: 'top',\r",
                    "                layout:'hbox',\r",
                    "                cls:\"messageBody\",\r",
                    "                style:{\"background-color\":\"#345777!important\"},\r",
                    "                items:[\r",
                    "                    {\r",
                    "                        xtype:\"container\",\r",
                    "                        flex:1,\r",
                    "//html:'<span style:\"margin-right:5px\" class=\"whiteDocumentIconCls\"></span>\r",
                    "                        html:'<img src=\"'+icoName+'\" style:\"margin-right:5px\"></img><a type=\"doc\" href=\"'+attachments[i].doc.url+'\" style=\"color:white!important;font-size:0.8em;font-weight:light;vertical-align:top;\">'+attachments[i].doc.title+'</a>'\r",
                    "\r",
                    "                    },\r",
                    "                    {\r",
                    "                        xtype:'button',\r",
                    "                        //ui:'decline',\r",
                    "                       // docked:'left',\r",
                    "                        ui:'confirm',\r",
                    "                        iconCls:'viewDocument',\r",
                    "                        style:\"margin-left:5px\",\r",
                    "                        url:Ext.clone(attachments[i].doc.url),\r",
                    "                        ext:Ext.clone(attachments[i].doc.ext)\r",
                    "                        //handler:VKM.app.showDocument([attachments[i].doc.url,attachments[i].doc.ext)\r",
                    "                    }\r",
                    "                ],\r",
                    "                margin: 2\r",
                    "            });\r",
                    "\r",
                    "            //            console.log(record.getData());\r",
                    "        }\r",
                    "        if (attachments[i].type=='audio')\r",
                    "        {\r",
                    "\r",
                    "            body.add({\r",
                    "                xtype:'container',\r",
                    "                width:260,\r",
                    "                docked:'bottom',\r",
                    "                //margin:5,\r",
                    "                items:[\r",
                    "//                     {\r",
                    "//                         xtype:\"container\",\r",
                    "//                         flex:1,\r",
                    "// //html:'<span style:\"margin-right:5px\" class=\"whiteDocumentIconCls\"></span>\r",
                    "//                         html:'<audio data-controls=\"true\" style=\"width:100%;\">'+\r",
                    "//                         '<source src=\"'+attachments[i].audio.url+'\" type=\"audio/mp3\" /></audio>'\r",
                    "\r",
                    "//                     },\r",
                    "\r",
                    "                    Ext.create('ux.AudioPlayer',{\r",
                    "                        xtype: 'audioplayer',\r",
                    "                        docked:'top',\r",
                    "                        //                            width:250,\r",
                    "                        //                             height:40,\r",
                    "                        duration:attachments[i].audio.duration,\r",
                    "                        url  : attachments[i].audio.url,\r",
                    "                        title:attachments[i].audio.artist+', '+attachments[i].audio.title\r",
                    "                    })\r",
                    "\r",
                    "                    //                         {\r",
                    "                    //                             xtype:'component',\r",
                    "                    //                             docked:'top',\r",
                    "                    //                             html:attachments[i].audio.artist+', '+attachments[i].audio.title,\r",
                    "                    //                             style:{\"font-size\":\"0.8em\",\"font-weight\": \"light\",\"margin-bottom\":\"0.5em\"}\r",
                    "\r",
                    "                ]\r",
                    "            });\r",
                    "\r",
                    "        }\r",
                    "        if (attachments[i].type=='video')\r",
                    "        {\r",
                    "            var description=attachments[i].video.description;\r",
                    "            description=description.replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gi,\"<a href='$1' target='_blank' style='color:white!important'>$1</a>\");\r",
                    "            description=description.replace(/\\r\\n|\\r|\\n/g,\"<br />\");\r",
                    "            var id=attachments[i].video.owner_id+'_'+attachments[i].video.id\r",
                    "            var access_key=attachments[i].video.access_key;\r",
                    "            if (access_key)\r",
                    "            {\r",
                    "                id=id+'_'+access_key;\r",
                    "            }\r",
                    "            var date=new Date(attachments[i].video.date);\r",
                    "            var comments=attachments[i].video.comments;\r",
                    "            var views=attachments[i].video.views\r",
                    "            var videoContainer=body.add({\r",
                    "                xtype:'container',\r",
                    "                docked:'bottom',\r",
                    "                //margin:5,\r",
                    "                items:[\r",
                    "//                     {\r",
                    "//                         xtype:'component',\r",
                    "//                         docked:'top',\r",
                    "//                         html:'<div class=\"whiteVideoIconCls\">'+attachments[i].video.title+'</div>',\r",
                    "//                         style:{\"font-size\":\"0.8em\",\"font-weight\": \"light\",\"margin-bottom\":\"0.5em\"}\r",
                    "//                     },\r",
                    "//                     {\r",
                    "//                         html:'<a onclick=\" alert(\\''+ux.locale.Manager.get('labels.impossible')+'\\')\" type=\"video\"><img width=100% src='+attachments[i].video.photo_320+'></img></a>',\r",
                    "//                         width: 260,\r",
                    "//                         xtype: 'component',\r",
                    "//                         docked: 'top'\r",
                    "//                         //html:'<a type=\"video\" href=http://vk.com/video_ext.php?oid=63709057&id=164774633&hash=9a9aa1d37dc57f8d>fff</a>'\r",
                    "//                     }\r",
                    "                    //                         {\r",
                    "                    //                             xtype:'component',\r",
                    "                    //                             docked:'top',\r",
                    "                    //                             html:description,\r",
                    "                    //                             style:{\"font-size\":\"0.8em\",\"font-weight\": \"light\",\"margin-bottom\":\"0.5em\"}\r",
                    "                    //                         }\r",
                    "                ]\r",
                    "            });\r",
                    "            //if (!attachments[i].video.player)\r",
                    "            {\r",
                    "                var dataController=VKM.app.getController('DataLoader');\r",
                    "\r",
                    "                videoContainer.callback=function(request,resp)\r",
                    "                {\r",
                    "                   // console.log(arguments);\r",
                    "                    var response=resp.response;\r",
                    "                    if(response.count>0)\r",
                    "                    {\r",
                    "\r",
                    "                        request.request.options.extraData.add({\r",
                    "                            width: 260,\r",
                    "                            xtype: 'component',\r",
                    "                            docked: 'top',\r",
                    "                           // html:'<a  href=\"'+response.items[0].player+'?html5=1\">'+response.items[0].title+'</a>'\r",
                    "                            html:'<img t=\"video0\" class=\"'+response.items[0].player+'?html5=1\" width=100% src=\"'+response.items[0].photo_320+'\"></img>',\r",
                    "//                             '<video data-controls=\"true\" style=\"width:100%;\" data-theme=\"c\">'+\r",
                    "//                             '<source src=\"'+response.items[0].player+'?html5=1'+'\" type=\"video/mp4\" /></video>'\r",
                    "\r",
                    "                        });\r",
                    "\r",
                    "//                         request.request.options.extraData.add({\r",
                    "//                             xtype: 'video',\r",
                    "//                             width    : 260,\r",
                    "//                             height   : 200,\r",
                    "//                             url: [\r",
                    "//                                 response.items[0].player+'?html5=1'\r",
                    "//                             ],\r",
                    "//                             loop: false,\r",
                    "//                             posterUrl: response.items[0].photo_320\r",
                    "//                         })\r",
                    "\r",
                    "                    }\r",
                    "                }\r",
                    "\r",
                    "\r",
                    "                var url='https://api.vk.com/method/video.get';\r",
                    "                var params=\r",
                    "                    {\r",
                    "                        v:'5.3',\r",
                    "                        videos:id,\r",
                    "                        access_token:VKM.app.globals.authData['access_token'],\r",
                    "                        access_key:access_key\r",
                    "                    };\r",
                    "                dataController.go(url,params,videoContainer.callback,videoContainer);\r",
                    "            }\r",
                    "\r",
                    "        }\r",
                    "\r",
                    "        //doc.title\r",
                    "        //doc.url\r",
                    "        //doc.ext\r",
                    "    }\r",
                    "};\r",
                    "if(record.fwd_messages)\r",
                    "{\r",
                    "    var fwdMessages=body.add(\r",
                    "        {\r",
                    "            xtype: 'container',\r",
                    "            layout: {\r",
                    "                align: 'start',\r",
                    "                type: 'vbox'\r",
                    "            },\r",
                    "            style: {'border-left':'3px dotted white',\"padding-left\":\"5px\",\"padding-top\":\"5px\"},\r",
                    "        }\r",
                    "    )\r",
                    "\r",
                    "    for (var i=0;i<record.fwd_messages.length;i++)\r",
                    "    {\r",
                    "        var message=record.fwd_messages[i];\r",
                    "        var mdate=new Date(message.date);\r",
                    "        var member=Ext.getStore('Users').getById(message['user_id']);\r",
                    "        fwdMessages.add(\r",
                    "            {\r",
                    "                xtype: 'container',\r",
                    "                cls: 'multiChat',\r",
                    "                style: {\r",
                    "                    \"margin-left\":\"5px\"\r",
                    "\r",
                    "                },\r",
                    "                layout: {\r",
                    "                    align: 'start',\r",
                    "                    type: 'vbox'\r",
                    "                },\r",
                    "                items: [\r",
                    "                    {\r",
                    "                        xtype: 'image',\r",
                    "                        docked: 'left',\r",
                    "                        itemId: 'avatar0',\r",
                    "                        margin: 2,\r",
                    "                        style: 'style=\"border-radius: 50% 50% 50% 50%\"',\r",
                    "                        width: 30,\r",
                    "                        cls:'blueBackground',\r",
                    "                        src:member.get('photo_50')\r",
                    "                    },\r",
                    "                    {\r",
                    "                        xtype: 'component',\r",
                    "                        cls: 'x-item-name',\r",
                    "                        html: member.get('first_name')+' '+member.get('last_name')\r",
                    "                    },\r",
                    "                    {\r",
                    "                        xtype: 'component',\r",
                    "                        cls: 'x-item-time',\r",
                    "                        html: moment(mdate).format('D MMMM d:mm')\r",
                    "                    }\r",
                    "                ]\r",
                    "            });\r",
                    "\r",
                    "        var messageBody=message.body;\r",
                    "        messageBody= messageBody.replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gi,\"<a href='$1' target='_blank' style='color:white!important'>$1</a>\");\r",
                    "        messageBody=VKM.app.smiles(messageBody);\r",
                    "        messageBody='<div>'+messageBody+'</div>';\r",
                    "\r",
                    "\r",
                    "        messageBody=messageBody.replace(/\\r\\n|\\r|\\n/g,\"<br />\");\r",
                    "        var text=fwdMessages.add({\r",
                    "            xtype: 'component',\r",
                    "            cls: 'x-item-body',\r",
                    "            style:{\"margin-bottom\":\"5px\"},\r",
                    "            html:messageBody\r",
                    "        })\r",
                    "\r",
                    "\r",
                    "        var newBody=fwdMessages.add({\r",
                    "            xtype: 'container',\r",
                    "            cls: 'x-item-body',\r",
                    "            style:{\"margin-bottom\":\"5px\"}\r",
                    "        })\r",
                    "        var params={\r",
                    "            message:message,\r",
                    "            body:newBody,\r",
                    "            component:component\r",
                    "        };\r",
                    "        component.renderMessage(params);\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    ""
                ]
            },
            "designerId": "04c7a1ba-4291-4c50-b20e-8a1ca12ef61c"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "buffer": null,
                "delay": null,
                "fn": "onListitemPainted",
                "implHandler": [
                    "//this.getParent().getParent().getScrollable().getScroller().scrollToEnd();\r",
                    "// console.log('painted');\r",
                    "// console.log(this.getParent().getParent().doNotScroll);\r",
                    "if(!this.getParent().getParent().doNotScroll)\r",
                    "{\r",
                    "    VKM.app.globals.scrollToEndTask.delay(300);\r",
                    "}\r",
                    "\r",
                    ""
                ],
                "name": "painted",
                "order": "after"
            },
            "designerId": "f61574c6-fe3d-417c-ac6e-167da81007f5"
        }
    ]
}