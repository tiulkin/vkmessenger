{
    "type": "Ext.Container",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "contactinfo",
        "designer|userClassName": "ContactInfo",
        "hidden": false,
        "itemId": "contactCard",
        "layout": "vbox",
        "scrollable": "vertical"
    },
    "designerId": "94992384-5c36-4518-a18b-a724a7124e4b",
    "cn": [
        {
            "type": "Ext.TitleBar",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|pack": "justify",
                "designer|uiInterfaceName": "plain",
                "docked": "top",
                "itemId": "userName",
                "ui": "plain"
            },
            "designerId": "739b9dde-9e0a-48e0-8b68-b318c1d0d69d",
            "cn": [
                {
                    "type": "Ext.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|uiInterfaceName": "action",
                        "iconCls": "arrow_left",
                        "itemId": "backToContactsButton",
                        "text": null,
                        "ui": "action"
                    },
                    "designerId": "6528556a-00a4-4c98-ab3a-4bbc541f4554"
                },
                {
                    "type": "Ext.Component",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "userText",
                        "layout|flex": 1,
                        "style": [
                            "{\"font-weight\":\"bold\",\"text-aligh\":\"center\",\"vertical-aligh\":\"center\"}"
                        ],
                        "width": "90%"
                    },
                    "configAlternates": {
                        "style": "object"
                    },
                    "designerId": "4fef6ae2-3cdb-4072-a370-638b22aecddb"
                }
            ]
        },
        {
            "type": "Ext.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "center",
                "container|pack": "center",
                "height": null,
                "hidden": null,
                "layout": "vbox"
            },
            "designerId": "a4d7ed7e-1f5c-45f0-972f-c5c81fd8a388",
            "cn": [
                {
                    "type": "Ext.Component",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "userPhoto",
                        "width": 200
                    },
                    "designerId": "77b42de8-a1d7-4c7d-8977-e1669dd37422"
                }
            ]
        },
        {
            "type": "Ext.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "center",
                "container|pack": "center",
                "hidden": true,
                "itemId": "contactStuff",
                "layout": "vbox",
                "width": null
            },
            "designerId": "da297c1b-014a-44fe-b18b-ba3d4af1b367",
            "cn": [
                {
                    "type": "Ext.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "lastseen"
                    },
                    "designerId": "30812f02-c953-4061-b699-1a995cfdc3ac"
                },
                {
                    "type": "Ext.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "location"
                    },
                    "designerId": "f42811d8-5eb7-4f8f-a91a-ef4357068b83"
                },
                {
                    "type": "Ext.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "body"
                    },
                    "designerId": "432f6702-676e-44a7-a73a-645ad2ef76b2"
                },
                {
                    "type": "Ext.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "body1",
                        "margin": "5px",
                        "width": "95%"
                    },
                    "designerId": "d980730b-96e2-40b6-88dd-5dc104907ade"
                },
                {
                    "type": "Ext.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "friendsTitle"
                    },
                    "designerId": "10265ede-5708-41d3-a543-730b31247b00"
                },
                {
                    "type": "Ext.dataview.DataView",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "cls": [
                            "dataview-horizontal"
                        ],
                        "height": 135,
                        "hidden": true,
                        "inline": [
                            "{wrap: false}"
                        ],
                        "itemCls": "",
                        "itemId": "friendsList",
                        "scrollable": "horizontal",
                        "store": "FriendsInCommon",
                        "width": "100%"
                    },
                    "designerId": "3ed935ff-7d79-4f4c-b2a0-a83f56eadbcf",
                    "cn": [
                        {
                            "type": "Ext.XTemplate",
                            "reference": {
                                "name": "itemTpl",
                                "type": "object"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "itemTpl",
                                "implHandler": [
                                    "<div class=\"img\" style=\"background-image: url({photo_100});\"></div><br/><div class=\"name\" style=\"font-size:8px\">{first_name}<br/>{last_name}</div>"
                                ]
                            },
                            "designerId": "427794ce-3c9f-4b5f-b967-255d256557bd"
                        }
                    ]
                },
                {
                    "type": "Ext.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|uiInterfaceName": "action",
                        "itemId": "createMessageToFriendButton",
                        "locales": [
                            "{\"text\":\"labels.writeamessage\"}"
                        ],
                        "margin": 10,
                        "text": null,
                        "ui": "action",
                        "width": "80%"
                    },
                    "configAlternates": {
                        "locales": "object"
                    },
                    "designerId": "def7e4b5-c526-4367-aff0-b9239cbac0b3",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "locales",
                            "type": "string"
                        }
                    ],
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCreateMessageToFriendButtonTap",
                                "implHandler": [
                                    "var controller=VKM.app.getController('Contacts');\r",
                                    "var contact=controller.currentContact;\r",
                                    "var dialoguesController=VKM.app.getController('Dialogues');\r",
                                    "var user=contact.getData();;\r",
                                    "dialoguesController.createMessage(user);"
                                ],
                                "name": "tap"
                            },
                            "designerId": "e304f242-a9bf-4ac1-a936-9288c7e44971"
                        }
                    ]
                },
                {
                    "type": "Ext.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|uiInterfaceName": "action",
                        "hidden": true,
                        "itemId": "callToFriendButton",
                        "text": null,
                        "ui": "action",
                        "width": "80%"
                    },
                    "designerId": "f3bf0b5e-7db8-4179-aa82-080cc116aa16",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCallToFriendButtonTap",
                                "implHandler": [
                                    "\r",
                                    "var appControl = new tizen.ApplicationControl(\"http://tizen.org/appcontrol/operation/dial\",\"tel:\"+button.phone, null);\r",
                                    "\r",
                                    "tizen.application.launchAppControl(appControl,null,\r",
                                    "                                   function(){console.log(\"launch appControl succeeded\");},\r",
                                    "                                   function(e){console.log(\"launch appControl failed. Reason: \" + e.name);},\r",
                                    "                                   null);\r",
                                    ""
                                ],
                                "name": "tap"
                            },
                            "designerId": "6d358381-2500-4ef3-9275-bb2c4b7579fd"
                        }
                    ]
                },
                {
                    "type": "Ext.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "designerId": "776cc319-d4b1-44fe-8f3d-6ce60b39eb51"
                },
                {
                    "type": "Ext.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "designerId": "aeb34acc-aa04-4e07-bcdf-6244316448b6"
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onMycontainer31Painted",
                        "implHandler": [
                            "var button=this.down('#callToFriendButton');\r",
                            "var controller=VKM.app.getController('Contacts');\r",
                            "var contact=controller.currentContact;\r",
                            "\r",
                            "button.setHidden(true);\r",
                            "\r",
                            "if(contact.get('mobile_phone'))\r",
                            "{\r",
                            "    var phone1=contact.get('mobile_phone');\r",
                            "    button.setText(ux.locale.Manager.get('labels.Call')+' '+phone1);\r",
                            "    button.phone=phone1;\r",
                            "    button.setHidden(false);\r",
                            "}\r",
                            "else\r",
                            "{\r",
                            "    button.setHidden(true);\r",
                            "}\r",
                            "\r",
                            "if(contact.get('status'))\r",
                            "{\r",
                            "    \r",
                            "}\r",
                            "    \r",
                            "\r",
                            "if(contact.get('contacts')&&contact.get('contacts').home_phone)\r",
                            "{\r",
                            "    var phone2=contact.get('contacts').home_phone;\r",
                            "}\r",
                            ""
                        ],
                        "name": "painted"
                    },
                    "designerId": "8670a5ea-09cf-4379-899a-a24b378dce75"
                },
                {
                    "type": "Ext.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|uiInterfaceName": "decline",
                        "docked": null,
                        "id": "removeFromFriendsButton",
                        "itemId": "mybutton61",
                        "locales": [
                            "{'text':'labels.Deletefriend'}"
                        ],
                        "style": [
                            "{\r",
                            "    \"margin-top\":\"20px\"\r",
                            "}"
                        ],
                        "text": null,
                        "ui": "decline",
                        "width": "80%"
                    },
                    "configAlternates": {
                        "locales": "array",
                        "style": "object"
                    },
                    "designerId": "0ecbbc6f-7ac6-490a-ba00-d3a0e647af47",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "locales",
                            "type": "string"
                        }
                    ],
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onRemoveFromFriendsButtonTap",
                                "implHandler": [
                                    "var MB = Ext.MessageBox;\r",
                                    "Ext.apply(MB, {\r",
                                    "    YES: { text:ux.locale.Manager.get('labels.Yes'), itemId: 'yes', ui: 'action' },\r",
                                    "    NO: { text: ux.locale.Manager.get('labels.No'), itemId: 'no' }\r",
                                    "});\r",
                                    "Ext.apply(MB, {\r",
                                    "    YESNO: [MB.NO, MB.YES]\r",
                                    "});\r",
                                    "\r",
                                    "Ext.Msg.confirm(ux.locale.Manager.get('labels.DeleteConfirm'), \"\", function(e){\r",
                                    "    if(e == 'yes'){\r",
                                    "        var controller=VKM.app.getController('Contacts');\r",
                                    "        var contact=controller.currentContact;\r",
                                    "        var url='https://api.vk.com/method/friends.delete';\r",
                                    "        var params=\r",
                                    "            {\r",
                                    "                v:'5.4',\r",
                                    "                access_token:VKM.app.globals.authData['access_token'],\r",
                                    "                user_id:contact.get('id')\r",
                                    "            };\r",
                                    "        var dataController=VKM.app.getController('DataLoader');\r",
                                    "        Ext.getStore('Friends').remove(contact);\r",
                                    "        controller.getContactsTabBar().setHidden(false);\r",
                                    "        controller.getContactsTabPanel().setActiveItem(0);\r",
                                    "\r",
                                    "        dataController.go(url,params);\r",
                                    "\r",
                                    "    }\r",
                                    "});"
                                ],
                                "name": "tap"
                            },
                            "designerId": "ce2beca6-6c35-423d-a9b3-2b40b9f0539a"
                        }
                    ]
                }
            ]
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "delay": null,
                "fn": "onContactCardActivate",
                "implHandler": [
                    "var controller=VKM.app.getController('Contacts');\r",
                    "var panel=this;\r",
                    "var params=\r",
                    "    {\r",
                    "        v:'5.3',\r",
                    "        access_token:VKM.app.globals.authData['access_token'],        \r",
                    "        target_uid:controller.currentContact.get('id')\r",
                    "    };\r",
                    "\r",
                    "var store=Ext.getStore('FriendsInCommon');\r",
                    "store.removeAll();\r",
                    "store.getProxy().setExtraParams(params);\r",
                    "store.getProxy().setUrl(\"https://api.vk.com/method/execute.friendsInCommon\");\r",
                    "store.getProxy().setReader(\r",
                    "    Ext.create(\"ux.Contact\",\r",
                    "               {\r",
                    "                   rootProperty: 'response.friends'                       \r",
                    "               }\r",
                    "              )\r",
                    ");\r",
                    "store.load({callback:function(request,success,response){    \r",
                    "    var record=Ext.getStore('Users').getById(controller.currentContact.get('id'));\r",
                    "    var panel=Ext.ComponentQuery.query('#contactCard')[0];\r",
                    "    \r",
                    "    \r",
                    "        \r",
                    "    var isOnlineCls=\"\";\r",
                    "    if (record.get('online'))\r",
                    "    {\r",
                    "        isOnlineCls='class=\"userOnline\"';\r",
                    "    }\r",
                    "    else\r",
                    "    {\r",
                    "        isOnlineCls='class=\"userOffline\"';\r",
                    "    }\r",
                    "    \r",
                    "    var photo =record.get('photo_200')\r",
                    "    if (!photo)\r",
                    "    {\r",
                    "        photo=record.get('photo_200_orig');\r",
                    "    }\r",
                    "    \r",
                    "    panel.down('#userText').setHtml('<span '+isOnlineCls+'>'+record.get('first_name')+' '+record.get('last_name')+'</span>');\r",
                    "    panel.down('#userPhoto').setHtml('<img src=\"'+photo+'\"></img>');\r",
                    "    //console.log(1);\r",
                    "    //this.loadChatHeaderData(record.get('user_id'));\r",
                    "    //controller.loadChatMessagesStep1(record.get('user_id'));\r",
                    "\r",
                    "    \r",
                    "    //console.log(record)\r",
                    "\r",
                    "    var title=panel.down('#friendsTitle');\r",
                    "    title.setHtml(ux.locale.Manager.get('labels.mutualFriends')+'('+store.getCount()+'):');\r",
                    "    var friendsList=panel.down('#friendsList');\r",
                    "\r",
                    "    \r",
                    "    var location='';\r",
                    "    \r",
                    "    var country=record.get('countryName');\r",
                    "    if(country)\r",
                    "    {\r",
                    "        location=country+',';\r",
                    "    }\r",
                    "    \r",
                    "    var city=record.get('cityName');\r",
                    "    if(city)\r",
                    "    {\r",
                    "        location+=city;\r",
                    "    }\r",
                    "    if(location!='')\r",
                    "    {\r",
                    "        panel.query('#location')[0].setHidden(false);\r",
                    "        var html='<b>'+location+'</b>';\r",
                    "        panel.query('#location')[0].setHtml(html);\r",
                    "    }\r",
                    "    else\r",
                    "    {\r",
                    "        panel.query('#location')[0].setHidden(true);\r",
                    "    }\r",
                    "    \r",
                    "    \r",
                    "    var university_name=record.get('university_name');\r",
                    "    \r",
                    "    var html='';\r",
                    "    \r",
                    "    if(university_name)\r",
                    "    {\r",
                    "        panel.query('#body')[0].setHidden(false);\r",
                    "        html+=university_name\r",
                    "        panel.query('#body')[0].setHtml(html);\r",
                    "    }\r",
                    "    else\r",
                    "    {\r",
                    "        panel.query('#body')[0].setHidden(true);\r",
                    "    }\r",
                    "    var status=record.get('status');    \r",
                    "    var statusComponent=panel.query('#body1')[0]\r",
                    "    \r",
                    "    if(status)\r",
                    "    {\r",
                    "        console.log(status);        \r",
                    "        statusComponent.setHidden(false);        \r",
                    "        statusComponent.setHtml('<i>'+VKM.app.smiles(status)+'</i>');        \r",
                    "    }\r",
                    "    else\r",
                    "    {\r",
                    "        statusComponent.setHidden(true);\r",
                    "    }\r",
                    "    \r",
                    "//     console.log(statusComponent.getHtml());\r",
                    "//     console.log(statusComponent.setHeight(100));\r",
                    "//     console.log(statusComponent.setWidth(100));\r",
                    "    \r",
                    "    if (record.get('last_seen'))\r",
                    "    {\r",
                    "        var last_seen=new Date(parseInt(record.get('last_seen').time)*1000);\r",
                    "        panel.query('#lastseen')[0].setHidden(false);\r",
                    "        panel.query('#lastseen')[0].setHtml(ux.locale.Manager.get('labels.lastvisit')+' '+moment(last_seen).fromNow());\r",
                    "    }\r",
                    "    else\r",
                    "    {\r",
                    "        panel.query('#lastseen')[0].setHidden(false);\r",
                    "    }\r",
                    "\r",
                    "    \r",
                    "    \r",
                    "    \r",
                    "    if (store.getCount()>0)\r",
                    "    {\r",
                    "        friendsList.setHidden(false);\r",
                    "    }\r",
                    "    else\r",
                    "    {\r",
                    "        friendsList.setHidden(true);\r",
                    "        title.setHtml(ux.locale.Manager.get('labels.noMutualFriends'));\r",
                    "    }\r",
                    "    panel.query('#contactStuff')[0].setHidden(false);\r",
                    "    \r",
                    "}\r",
                    "           });\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "//console.log(record);\r",
                    "//this.down('#name').setHtml('<span '+isOnlineCls+'>'+Ext.String.ellipsis(user.get('first_name')+' '+user.get('last_name'),23)+'</span>'); //+isOnline);\r",
                    "// var isOnlineCls=\"\";\r",
                    "// if (user.get('online'))\r",
                    "// {\r",
                    "//     isOnlineCls='class=\"userOnline\"';\r",
                    "\r",
                    "// }\r",
                    "// else\r",
                    "// {\r",
                    "//     isOnlineCls='class=\"userOffline\"';\r",
                    "// }\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    ""
                ],
                "name": "activate"
            },
            "designerId": "fd366d32-1050-445f-ac39-149c7200eef9"
        }
    ]
}